var Canvas = require("canvas"); // npm i canvas
var { splitText, drawCircle, resizeText } = require("editor-canvas");

module.exports = {
  createWelcomeImage: async(member,welcomer) => {
    var _0xeb21=["\x61\x76\x61\x74\x61\x72","\x75\x73\x65\x72\x6E\x61\x6D\x65","\x74\x65\x78\x74","\x62\x61\x63\x6B\x67\x72\x6F\x75\x6E\x64","\x62\x61\x73\x65\x36\x34","\x66\x72\x6F\x6D","\x6C\x6F\x61\x64\x49\x6D\x61\x67\x65"];var avatars=welcomer[_0xeb21[0]];var usernames=welcomer[_0xeb21[1]];var text=welcomer[_0xeb21[2]];var background=welcomer[_0xeb21[3]];if(background){try{background=  await Canvas[_0xeb21[6]](Buffer[_0xeb21[5]](background,_0xeb21[4]))}catch(err){background=  await Canvas[_0xeb21[6]](background)};â€Š}
    var canvas = Canvas.createCanvas(background?.width || 400, background?.height || 200);
    var _0xe004=["\x77\x69\x64\x74\x68","\x68\x65\x69\x67\x68\x74","\x63\x72\x65\x61\x74\x65\x43\x61\x6E\x76\x61\x73","\x32\x64","\x67\x65\x74\x43\x6F\x6E\x74\x65\x78\x74","\x64\x72\x61\x77\x49\x6D\x61\x67\x65","\x6A\x70\x67","\x64\x69\x73\x70\x6C\x61\x79\x41\x76\x61\x74\x61\x72\x55\x52\x4C","\x75\x73\x65\x72","\x59\x45\x4C\x4C\x4F\x57","\x6C\x6F\x61\x64\x49\x6D\x61\x67\x65","\x78","\x79","\x66\x69\x6C\x6C\x53\x74\x79\x6C\x65","\x57\x48\x49\x54\x45","\x75\x73\x65\x72\x6E\x61\x6D\x65","\x66\x6F\x6E\x74","","\x20\x41\x72\x69\x61\x6C","\x66\x69\x6C\x6C\x54\x65\x78\x74","\x77\x65\x6C\x63\x6F\x6D\x65\x20\x54\x6F","\x63\x6F\x6E\x74\x65\x6E\x74","\x74\x6F\x42\x75\x66\x66\x65\x72"];var canvas=Canvas[_0xe004[2]](background[_0xe004[0]]|| 400,background[_0xe004[1]]|| 200),ctx=canvas[_0xe004[4]](_0xe004[3]);if(background){ctx[_0xe004[5]](background,0,0,canvas[_0xe004[0]],canvas[_0xe004[1]])};var avatar=member[_0xe004[8]][_0xe004[7]]({format:_0xe004[6]});avatar=  await drawCircle({image:avatar,stroke:_0xe004[9]});avatar=  await Canvas[_0xe004[10]](avatar);ctx[_0xe004[5]](avatar,avatars[_0xe004[11]],avatars[_0xe004[12]],avatars[_0xe004[0]],avatars[_0xe004[1]]);ctx[_0xe004[13]]= _0xe004[14];let usernameFont=resizeText(ctx,{text:member[_0xe004[8]][_0xe004[15]],font:17.5* (canvas[_0xe004[0]]/ 400)+ (canvas[_0xe004[0]]/ 100)});ctx[_0xe004[16]]= `${_0xe004[17]}${usernameFont}${_0xe004[18]}`;var username=splitText(ctx,{text:member[_0xe004[8]][_0xe004[15]],width:canvas[_0xe004[0]]- usernames[_0xe004[11]]- (20* (canvas[_0xe004[0]]/ 400)),maxLine:1});ctx[_0xe004[19]](username,usernames[_0xe004[11]],usernames[_0xe004[12]]);let textFont=resizeText(ctx,{text:_0xe004[20],font:15.79* (canvas[_0xe004[0]]/ 400)+ (canvas[_0xe004[0]]/ 100)});ctx[_0xe004[16]]= `${_0xe004[17]}${textFont}${_0xe004[18]}`;var text1=splitText(ctx,{text:text[_0xe004[21]],width:canvas[_0xe004[0]]- text[_0xe004[11]]- (20* (canvas[_0xe004[0]]/ 400)),maxLine:2});ctx[_0xe004[19]](text1,text[_0xe004[11]],text[_0xe004[12]]);return canvas[_0xe004[22]]()
  }
}
